import { ImageResponse } from "next/og";
import { NextRequest } from "next/server";

const OPENNEXT_LOGO =
  "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTUiIGhlaWdodD0iMzYiIGZpbGw9Im5vbmUiPjxwYXRoIGZpbGw9ImN1cnJlbnRDb2xvciIgZD0iTTg5Ljk1NyAyN1YyLjg4aDUuOTRsMTIuODE2IDE3LjAyOFYyLjg4aDQuNTM1VjI3aC00LjU3Mkw5NC40OTMgOC4xMzZWMjd6TTEyMC43MjUgMjdWMi44OGgyMS4zMTJ2NC4xNGgtMTYuNTk2djUuNjg4aDE0LjExMnY0LjEwNGgtMTQuMTEydjYuMDQ4aDE2Ljg4NFYyN3pNMTQ1LjggMjdsOC45NjQtMTIuNDItOC44Mi0xMS43aDUuODMybDYuNjI0IDguNzEyIDYuMjY0LTguNzEyaDUuNDM2bC04LjgyIDEyLjI0IDkgMTEuODhoLTUuODY4bC02Ljc2OC04LjkyOEwxNTEuMjM2IDI3ek0xODEuMDc0IDI3VjcuMDkyaC04Ljg1NlYyLjg4aDIyLjQyOHY0LjIxMmgtOC44NTZWMjd6TTEwLjIyOCAyNy4zNTJjLTIuMDc0IDAtMy44Mi0uNDA1LTUuMjM4LTEuMjEzLTEuNDA2LS44Mi0yLjQ3Mi0xLjk3NS0zLjItMy40NjNDMS4wNzcgMjEuMTg4LjcyIDE5LjQ0Ny43MiAxNy40NTZjMC0xLjQwNy4xMjMtMi43ODQuMzY5LTQuMTMyLjI1OC0xLjM2LjYzMy0yLjY1NCAxLjEyNS0zLjg4NWExNi40NTIgMTYuNDUyIDAgMCAxIDEuODQ2LTMuNDFBMTIuOTggMTIuOTggMCAwIDEgNi42NiAzLjMyMiAxMS4yNzYgMTEuMjc2IDAgMCAxIDkuOTY1IDEuNTNjMS4yMy0uNDIyIDIuNTcyLS42MzMgNC4wMjUtLjYzMyAzIDAgNS4yOTcuODg1IDYuODkgMi42NTUgMS42MDYgMS43NyAyLjQwOSA0LjE3MiAyLjQwOSA3LjIwNyAwIDEuNDA2LS4xMTcgMi43OTUtLjM1MiA0LjE2NmExOS41MzYgMTkuNTM2IDAgMCAxLTEuMDU0IDMuOTAyIDE2LjIxMSAxNi4yMTEgMCAwIDEtMS43NzYgMy40MSAxMi4yNzMgMTIuMjczIDAgMCAxLTIuNTMgMi42OWMtLjk2Mi43NjItMi4wNTggMS4zNi0zLjI4OCAxLjc5My0xLjIxOS40MjItMi41NzIuNjMzLTQuMDYuNjMzbS4yNDctMy42MDRjLjg1NSAwIDEuNjU4LS4xNTIgMi40MDgtLjQ1N2E3LjEyMyA3LjEyMyAwIDAgMCAyLjA1Ni0xLjI4MyA5LjI2NCA5LjI2NCAwIDAgMCAxLjY4OC0yLjAyMmMuNTA0LS43ODUuOTI2LTEuNjU4IDEuMjY1LTIuNjE5LjM1Mi0uOTYuNjIyLTEuOTkyLjgxLTMuMDk0LjE4Ny0xLjExMy4yOC0yLjI3My4yOC0zLjQ4IDAtMS45NTctLjQ2Mi0zLjQ5OC0xLjM4OC00LjYyMy0uOTE0LTEuMTI1LTIuMjIxLTEuNjg4LTMuOTItMS42ODgtLjg4IDAtMS43MDUuMTU5LTIuNDc5LjQ3NWE2Ljk3NSA2Ljk3NSAwIDAgMC0yLjExIDEuMzM2QTkuNjEgOS42MSAwIDAgMCA3LjM2NCA4LjM1YTEzLjkxNiAxMy45MTYgMCAwIDAtMS4yNjUgMi42MTljLS4zNTIuOTYtLjYyMiAxLjk4Ni0uODA5IDMuMDc2YTIwLjk1MiAyMC45NTIgMCAwIDAtLjI2NCAzLjM3NWMwIDEuMzM2LjIxMSAyLjQ3OC42MzMgMy40MjguNDM0Ljk0OSAxLjA1NSAxLjY3IDEuODYzIDIuMTYyLjgyLjQ5MiAxLjgwNS43MzggMi45NTQuNzM4TTIyLjcyNyAzNS42M2w1Ljk2LTI4LjA4OWgzLjIxNmwtLjM4NyAzLjM1N2guMTRhMTMuODUgMTMuODUgMCAwIDEgMS42MTgtMS44MSA3Ljc5OCA3Ljc5OCAwIDAgMSAyLjAwNC0xLjM3MSA1LjcyNSA1LjcyNSAwIDAgMSAyLjQ2LS41MjhjLjk5NyAwIDEuOS4yNDcgMi43MDguNzM5LjgyLjQ4IDEuNDcgMS4yMyAxLjk1MSAyLjI1LjQ5MiAxLjAwNy43MzggMi4zMDguNzM4IDMuOTAyIDAgMS4zMzYtLjE0IDIuNjQ5LS40MjEgMy45MzhhMTYuNDcgMTYuNDcgMCAwIDEtMS4xOTYgMy42MDMgMTIuNTk1IDEyLjU5NSAwIDAgMS0xLjkzMyAyLjk4OCA4LjYzMiA4LjYzMiAwIDAgMS0yLjU2NyAyLjAyMmMtLjk2LjQ4LTIuMDE1LjcyLTMuMTY0LjcyLS44NDQgMC0xLjU3LS4xNC0yLjE4LS40MjFhNC42NTMgNC42NTMgMCAwIDEtMS41MTEtMS4xNiA3LjUyNSA3LjUyNSAwIDAgMS0xLjAzNy0xLjU4MmgtLjE1OWMtLjA1OC42OS0uMTQgMS40MTItLjI0NiAyLjE2Mi0uMTA1Ljc1LS4yMzQgMS40NjQtLjM4NiAyLjE0NGwtMS41MTIgNy4xMzd6TTMzLjMxIDIzLjk5NWEzLjQyIDMuNDIgMCAwIDAgMS44NjQtLjU0NWMuNTc0LS4zNzUgMS4wOTUtLjg4NSAxLjU2NC0xLjUzYTkuODQgOS44NCAwIDAgMCAxLjE5NS0yLjIzMmMuMzI4LS44NDMuNTgtMS43MzQuNzU2LTIuNjcxLjE3Ni0uOTUuMjY0LTEuOTA1LjI2NC0yLjg2NiAwLTEuMTk1LS4yMzUtMi4wOTEtLjcwMy0yLjY5LS40NTctLjYwOC0xLjE0OS0uOTEzLTIuMDc1LS45MTMtLjU2MiAwLTEuMTAxLjE0Ni0xLjYxNy40NGE1LjUxIDUuNTEgMCAwIDAtMS40NDEgMS4xNiA5LjE4IDkuMTggMCAwIDAtMS4yMTMgMS43MjIgMTIuODI1IDEyLjgyNSAwIDAgMC0uOTMyIDIuMDc0IDE1LjE2MSAxNS4xNjEgMCAwIDAtLjU5NyAyLjI1IDEzLjI3IDEzLjI3IDAgMCAwLS4xOTQgMi4yMTVjMCAxLjA3OC4yNjQgMS45NDUuNzkxIDIuNjAyLjU0LjY1NiAxLjMxOS45ODQgMi4zMzguOTg0TTUzLjE3MyAyNy4zNTJjLTEuNDg4IDAtMi43ODktLjI4Mi0zLjkwMi0uODQ0YTYuMSA2LjEgMCAwIDEtMi41NjYtMi41MTRjLS41OTgtMS4xMTMtLjg5Ny0yLjQ3Mi0uODk3LTQuMDc4IDAtMS41OTQuMjI4LTMuMTQ2LjY4NS00LjY1OGExMy40NzMgMTMuNDczIDAgMCAxIDIuMDIyLTQuMTEzIDEwLjEwOSAxMC4xMDkgMCAwIDEgMy4yNTItMi45YzEuMjc3LS43MTYgMi43My0xLjA3MyA0LjM2LTEuMDczIDEuOTkxIDAgMy40ODYuNDUxIDQuNDgyIDEuMzUzIDEuMDA4Ljg5MSAxLjUxMSAyLjA3NSAxLjUxMSAzLjU1MSAwIDEuMDA4LS4yMjggMS45MjgtLjY4NSAyLjc2LS40NTcuODMyLTEuMTU0IDEuNTUzLTIuMDkyIDIuMTYyLS45MjYuNTk4LTIuMTAzIDEuMDYtMy41MzMgMS4zODktMS40MTguMzI4LTMuMDg4LjQ5Mi01LjAxLjQ5MmgtLjc5Yy0uMDEzLjE3Ni0uMDI0LjM1Ny0uMDM2LjU0NWE3Ljk0IDcuOTQgMCAwIDAtLjAxOC41MjdjMCAxLjMwMS4zNCAyLjMyNiAxLjAyIDMuMDc2LjY4LjczOSAxLjY3IDEuMTA4IDIuOTcgMS4xMDguOTg1IDAgMS44OTMtLjEyMyAyLjcyNS0uMzcuODMyLS4yNDUgMS43NjQtLjYxNSAyLjc5NS0xLjEwN3YzLjI1MmMtLjk0OS40NTctMS45MS44MTUtMi44ODMgMS4wNzItLjk3Mi4yNDctMi4xMDkuMzctMy40MS4zN001MC41MiAxNS44OWguNTk4YzEuNDMgMCAyLjY3MS0uMTM1IDMuNzI2LS40MDUgMS4wNTUtLjI4IDEuODctLjY5MSAyLjQ0My0xLjIzLjU3NS0uNTUuODYyLTEuMjE5Ljg2Mi0yLjAwNCAwLS42MS0uMTk0LTEuMDg0LS41OC0xLjQyNC0uMzc1LS4zNTEtLjkzOC0uNTI3LTEuNjg4LS41MjctLjczOCAwLTEuNDY1LjIyOC0yLjE4LjY4NS0uNzE0LjQ0Ni0xLjM1MyAxLjA5LTEuOTE2IDEuOTM0LS41NjIuODMyLS45ODQgMS44MjItMS4yNjUgMi45N002My4xOTMgMjdsNC4xNDktMTkuNTEyaDMuMzIybC0uNDIyIDMuNjc0aC4xMDZhMTIuNzc5IDEyLjc3OSAwIDAgMSAxLjYzNS0xLjk1MSA3LjkgNy45IDAgMCAxIDIuMTA5LTEuNTEyYy43OTctLjM4NiAxLjY4Ny0uNTggMi42NzItLjU4IDEuMDc4IDAgMS45OTIuMjExIDIuNzQyLjYzM2E0LjExMSA0LjExMSAwIDAgMSAxLjcwNSAxLjgxYy4zODcuNzg2LjU4IDEuNzIzLjU4IDIuODEzIDAgLjQ4LS4wNC45OTYtLjEyMyAxLjU0Ny0uMDcuNTM5LS4xNjQgMS4wNjYtLjI4MSAxLjU4Mkw3OC45NDMgMjdoLTQuMmwyLjQ5NS0xMS44M2MuMTA2LS40NTcuMTgyLS44NjcuMjI5LTEuMjMuMDU4LS4zNjQuMDg4LS43MDQuMDg4LTEuMDIgMC0uNzc0LS4xOTQtMS4zNTQtLjU4LTEuNzQtLjM3NS0uMzg3LS45MzgtLjU4LTEuNjg4LS41OC0uODIgMC0xLjYyOS4zMTYtMi40MjYuOTQ5LS43OTcuNjMzLTEuNTE3IDEuNTUzLTIuMTYyIDIuNzYtLjY0NCAxLjIwNy0xLjE1NCAyLjY2Ni0xLjUyOSA0LjM3N0w2Ny40MTIgMjd6Ii8+PC9zdmc+";

export function GET(request: NextRequest) {
  const searchParams = new URLSearchParams(request.nextUrl.search);

  const text = searchParams.get("text") || "Hello, OG Image!";

  return new ImageResponse(
    (
      <div
        style={{
          display: "flex",
          flexDirection: "column",
          justifyContent: "space-between",
          padding: 48,
          alignItems: "center",
          background: "linear-gradient(135deg, #f6d365, #fda085)",
          width: "100%",
          height: "100%",
          color: "#090909",
          fontSize: 36,
        }}
      >
        <img
          src={OPENNEXT_LOGO}
          style={{
            width: 480,
            margin: "auto 0",
          }}
        />
        {text}
      </div>
    ),
    {
      width: 1200,
      height: 630,
    }
  );
}
